---
title: Проверка входных данных
author: rebeccaanne
ms.author: rebecch
ms.date: 07/24/2020
ms.topic: article
ms.openlocfilehash: 08fb2cb5b2b6fa1f227ec5a530f8063dc26b40e3
ms.sourcegitcommit: 19c08b1370305fb2965de0140c5e632356e78513
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/06/2020
ms.locfileid: "87879137"
---
# <a name="input-validation"></a><span data-ttu-id="08a1a-102">Проверка входных данных</span><span class="sxs-lookup"><span data-stu-id="08a1a-102">Input Validation</span></span>

<span data-ttu-id="08a1a-103">В версии схемы 1.3 и более поздних версиях адаптивные карточки поддерживают проверку входных данных типов Input на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="08a1a-103">In versions 1.3 and later of the schema, AdaptiveCards supports client side input validation of Input types.</span></span>

### <a name="validation-properties"></a><span data-ttu-id="08a1a-104">Свойства проверки</span><span class="sxs-lookup"><span data-stu-id="08a1a-104">Validation Properties</span></span>

<span data-ttu-id="08a1a-105">Адаптивные карточки поддерживают следующие свойства для проверки:</span><span class="sxs-lookup"><span data-stu-id="08a1a-105">The following properties are supported for validation in AdaptiveCards:</span></span>

| <span data-ttu-id="08a1a-106">Входные данные</span><span class="sxs-lookup"><span data-stu-id="08a1a-106">Input</span></span> | <span data-ttu-id="08a1a-107">Свойства</span><span class="sxs-lookup"><span data-stu-id="08a1a-107">Properties</span></span> |
| --- | --- | 
| `Input.ChoiceSet` | `isRequired` | 
| `Input.Date` | `isRequired` <br> `min`<br> `max` | 
| `Input.Number` | `isRequired` <br> `min`<br> `max` |
| `Input.Text` | `isRequired` <br> `regex` <br> `maxLength` |
| `Input.Time` | `isRequired` <br> `min`<br> `max` | 
| `Input.Toggle` | `isRequired` | 

<span data-ttu-id="08a1a-108">Свойство `errorMessage` доступно для входных данных всех типов. Оно позволяет указать, какое сообщение об ошибке должно отобразиться для пользователя, если он вводит недопустимое значение.</span><span class="sxs-lookup"><span data-stu-id="08a1a-108">An `errorMessage` property is available on all input types to specify what error a user should be shown if they enter an invalid value.</span></span> 

> [!NOTE]
>
> <span data-ttu-id="08a1a-109">Свойства min и max (включая maxLength) на некоторых платформах могут принудительно применяться непосредственно элементом управления.</span><span class="sxs-lookup"><span data-stu-id="08a1a-109">Min and max properties (including maxLength) on some platforms may be enforced directly by the control.</span></span> <span data-ttu-id="08a1a-110">Например, можно принудительно применить свойство min для Input.Date, запретив пользователям выбирать даты, предшествующие минимальному значению, в управляющем элементе выбора даты.</span><span class="sxs-lookup"><span data-stu-id="08a1a-110">For example, a min property on Input.Date may be enforced by not allowing users to select a date before the minimum in a date picker.</span></span> <span data-ttu-id="08a1a-111">В таком случае сообщение об ошибке может не отображаться.</span><span class="sxs-lookup"><span data-stu-id="08a1a-111">In that case, the error message may not be shown.</span></span>

## <a name="labels"></a><span data-ttu-id="08a1a-112">Метки</span><span class="sxs-lookup"><span data-stu-id="08a1a-112">Labels</span></span>

<span data-ttu-id="08a1a-113">В схеме версии 1.3 для всех входных элементов добавлено еще одно строковое свойство `label`.</span><span class="sxs-lookup"><span data-stu-id="08a1a-113">Another property added in schema version 1.3 for all input elements is the `label` string property.</span></span> <span data-ttu-id="08a1a-114">Свойство `label` рекомендуется использовать для добавления тегов к входным данным в адаптивной карте вместо свойства `placeholder`.</span><span class="sxs-lookup"><span data-stu-id="08a1a-114">Using the `label` property is the recommended way of tagging inputs in an Adaptive Card, vis-a-vis the `placeholder` property.</span></span> <span data-ttu-id="08a1a-115">Так создатели карточек могут легко и кратко размечать входные данные, получая следующие преимущества:</span><span class="sxs-lookup"><span data-stu-id="08a1a-115">It is a simple and concise way of labeling inputs for card authors and has the following benefits:</span></span>
* <span data-ttu-id="08a1a-116">Индикаторы проверки. Как упоминалось выше, входные данные могут быть помечены как обязательные, и тогда метки для обязательных параметров будут иметь визуальный индикатор.</span><span class="sxs-lookup"><span data-stu-id="08a1a-116">Validation indicators: as mentioned above inputs can be now marked as required, labels for required inputs will have a visual indicator next to them.</span></span> <span data-ttu-id="08a1a-117">Такой индикатор определяется в `HostConfig`, и по умолчанию для него используется звездочка `*`.</span><span class="sxs-lookup"><span data-stu-id="08a1a-117">This visual indicator is defined in the `HostConfig` and by default is rendered as an asterisk `*`.</span></span>
* <span data-ttu-id="08a1a-118">Специальные возможности. Благодаря связям между метками и входными данными библиотеки отрисовщика могут задавать необходимые свойства, позволяя пользователям применять вспомогательные технологии (например, средства чтения с экрана) для правильной работы с входными данными в адаптивных карточках.</span><span class="sxs-lookup"><span data-stu-id="08a1a-118">Accessibility: by having a connection between labels and inputs, renderer libraries can set the necessary properties to allow users using assistive technologies (screen readers) to be able to interact correctly with inputs inside adaptive cards.</span></span>
    * <span data-ttu-id="08a1a-119">Метки и заполнители. Кейти Шервин (Katie Sherwin) в [своей статье](https://www.nngroup.com/articles/form-design-placeholders/) объясняет, что использование заполнителей влечет множество негативных последствий, включая ограничение краткосрочной памяти для пользователей, усложнение проверки входных данных перед отправкой, затруднение чтения из-за того, что текст заполнителя обычно имеет низкую контрастность относительно фона, нарушение работы программ чтения с экрана и многое другое.</span><span class="sxs-lookup"><span data-stu-id="08a1a-119">Labels vs Placeholders: as Katie Sherwin explains in the article [Placeholders in form fields are harmful](https://www.nngroup.com/articles/form-design-placeholders/) using placeholders has many negative consequences such as straining users' short term memory, making it harder for users to verify their inputs before submitting, providing difficulties for users to read them as, usually, placeholder text has poor color contrast against it's background or screen readers not reading the placeholder text at all, just to name a few.</span></span>
    * <span data-ttu-id="08a1a-120">TextBlock и RichTextBlock. Использование других элементов карточки в качестве метки может показаться хорошим решением, но в этом случае входные данные и метки невозможно расположить рядом. С другой стороны, использование свойства `label` обеспечит отрисовку этих визуальных элементов рядом друг с другом, что очень полезно для тех пользователей, которые используют экранные лупы.</span><span class="sxs-lookup"><span data-stu-id="08a1a-120">TextBlock and RichTextBlock: while using other card elements as labels may seem as a good solution it presents the issue of not being able to enforce proximity between inputs and labels, on the other hand by using the `label` property, we can ensure that both visual elements are rendered next to each other which helps users who need screen magnifiers.</span></span>

## <a name="fields-to-be-validated-and-submitted"></a><span data-ttu-id="08a1a-121">Поля для проверки и отправки</span><span class="sxs-lookup"><span data-stu-id="08a1a-121">Fields to be validated and submitted</span></span>

<span data-ttu-id="08a1a-122">Входные данные будут проверены, когда пользователь щелкнет действие Action.Submit на карточке.</span><span class="sxs-lookup"><span data-stu-id="08a1a-122">Inputs will be validated when the user clicks on an Action.Submit action in the card.</span></span> <span data-ttu-id="08a1a-123">Для определенного действия Action.Submit будут проверяться и отправляться следующие входные данные:</span><span class="sxs-lookup"><span data-stu-id="08a1a-123">Those inputs which will be validated and submitted for a given Action.Submit action are:</span></span>

 - <span data-ttu-id="08a1a-124">входные данные, содержащиеся в карточке, на которой выбрано действие Action.Submit;</span><span class="sxs-lookup"><span data-stu-id="08a1a-124">Inputs on the same card as the Action.Submit</span></span>
 - <span data-ttu-id="08a1a-125">входные данные во всех родительских карточках той карточки, на которой выбрано действие Action.Submit, при использовании Action.ShowCard.</span><span class="sxs-lookup"><span data-stu-id="08a1a-125">Inputs on any parent cards of the card containing the Action.Submit in the case of a card under an Action.ShowCard</span></span>

<span data-ttu-id="08a1a-126">Если эти входные данные проходят проверку, значения в их полях будут возвращены клиенту.</span><span class="sxs-lookup"><span data-stu-id="08a1a-126">If those inputs pass validation, the values in their fields will be passed back to the client.</span></span> <span data-ttu-id="08a1a-127">Если данные не проходят проверку, для недопустимых входных данных отобразятся сообщения об ошибках и отправка не будет выполнена.</span><span class="sxs-lookup"><span data-stu-id="08a1a-127">If they do not pass validation, the error messages for the invalid inputs will be shown, and the submit will not be sent.</span></span>

> [!NOTE]
>
> <span data-ttu-id="08a1a-128">Входные данные **не** будут проверяться или отправляться, если они содержатся в карточке, которая является дочерней или родственной для карточки, на которой выбрано действие Action.Submit.</span><span class="sxs-lookup"><span data-stu-id="08a1a-128">Inputs will **not** be validated or submitted if they are on a card that is a child or sibling card of the card containing the Action.Submit.</span></span> <span data-ttu-id="08a1a-129">Сюда входят карточки, охватываемые Action.ShowCards в ActionSets в тексте карточки.</span><span class="sxs-lookup"><span data-stu-id="08a1a-129">This includes cards from Action.ShowCards in ActionSets in the body of that card.</span></span> <span data-ttu-id="08a1a-130">Это изменение в поведении наблюдается, начиная с версии отрисовщика 2.0. Оно характерно для карточек со всеми версиями схемы, независимо от того, используются ли свойства проверки входных данных.</span><span class="sxs-lookup"><span data-stu-id="08a1a-130">This is a change in behavior from renderer versions prior to 2.0, and applies to cards of all schema versions, regardless of whether input validation properties are used.</span></span> 

## <a name="other-considerations-and-known-issues"></a><span data-ttu-id="08a1a-131">Другие рекомендации и известные проблемы</span><span class="sxs-lookup"><span data-stu-id="08a1a-131">Other Considerations and Known Issues</span></span>

 - <span data-ttu-id="08a1a-132">Не рекомендуем создавать входные данные со свойствами проверки, которые не всегда могут быть видимыми из-за взаимодействия с Action.ToggleVisibility.</span><span class="sxs-lookup"><span data-stu-id="08a1a-132">It is not recommended to create inputs with validation properties that may not always be visible due to interaction with Action.ToggleVisibility.</span></span> <span data-ttu-id="08a1a-133">Сообщения об ошибках и визуальные индикаторы того, что входные данные недопустимы, не будут отображаться, если входные данные сейчас не видны. Это может вызвать замешательство у пользователей, которые не будут понимать, почему их отправка заблокирована.</span><span class="sxs-lookup"><span data-stu-id="08a1a-133">Error messages and visual indications that the input is invalid will not be shown if the input is not currently visible, which may cause confusion for users as to why their submit is blocked.</span></span>

 - <span data-ttu-id="08a1a-134">Поведение при проверке входных данных для основных элементов, использующих всплывающее окно для отображения карточек (значение `"actions":"showCard":"actionMode":"popup"` в конфигурации), недостаточно хорошо определено.</span><span class="sxs-lookup"><span data-stu-id="08a1a-134">Behavior of input validation for hosts using popup show cards using the  `"actions":"showCard":"actionMode":"popup"` value in their host config is not well defined.</span></span> <span data-ttu-id="08a1a-135">Возможно, в следующем выпуске всплывающее окно для отображения карточек будет отмечено как нерекомендуемое.</span><span class="sxs-lookup"><span data-stu-id="08a1a-135">Popup show cards may be deprecated in a future release.</span></span>