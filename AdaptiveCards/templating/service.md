---
title: Служба шаблонов адаптивных карт
author: matthidinger
ms.author: mahiding
ms.date: 08/01/2019
ms.topic: article
ms.openlocfilehash: 81d1e598b6157b6ba1fedbf458a7c624705afcd5
ms.sourcegitcommit: a16f53ba10a8607deacde5c8cc78927cac58657c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/09/2019
ms.locfileid: "68878891"
---
# <a name="adaptive-cards-template-service"></a>Служба шаблонов адаптивных карт

Служба шаблонов адаптивных карт — это служба для подтверждения концепции, которая позволяет любому пользователю находить, публиковать и совместно использовать набор хорошо известных шаблонов.

Это полезно, если требуется отобразить некоторые данные, но не нужно тратить на них настраиваемую адаптивную карту.

> Дополнительные сведения о шаблонах [адаптивных карт](index.md) см. в этой статье.

> [!IMPORTANT] 
> 
> *Условия и соглашения* 
> 
> Эта служба на **уровне альфа** предоставляется "как есть", со всеми ошибками и не поддерживается каким-либо образом. Любой сбор данных из службы подчиняется заявлению [о конфиденциальности Майкрософт](https://go.microsoft.com/fwlink/?LinkID=824704).
> 
> Эти функции доступны **в предварительной версии и могут быть изменены**. Ваш отзыв не только Добро пожаловать, но и важен для обеспечения того, чтобы мы доставлять нужные **вам** функции.

## <a name="how-does-the-service-help-me"></a>Как служба помогает мне?

Предположим, что у меня есть фрагмент данных, возможно, это финансовые данные, Microsoft Graph данные, schema.org данные или пользовательские данные из моей организации. 

Теперь я хочу отобразить данные пользователю. 

Традиционно это означает написание пользовательского ПОЛЬЗОВАТЕЛЬСКОГО кода во всех внешних стеках, которые я доставляет конечным пользователям.

Но что, если существовал мир, где мое приложение могло бы «изучать» новые шаблоны пользовательского интерфейса на основе типа данных? Мир, в котором любой пользователь может вносить, улучшать и совместно использовать общие шаблоны пользовательского интерфейса в своих проектах, в организации или для всего Интернета.

## <a name="what-is-the-card-template-service"></a>Что такое служба шаблонов карточек?

Служба шаблонов карточек — это простая конечная точка RESTFUL, которая помогает:

* **Поиск** шаблона путем анализа структуры данных
* **Получите** шаблон, чтобы привязать его непосредственно на клиенте, *не отправляя данные на сервер или не выходя из устройства* .
* **Заполнение** шаблона на сервере, когда привязка данных на стороне клиента не подходит или возможно

Под ним все это:

* Общий репозиторий шаблонов с открытым исходным кодом, поддерживающий GitHub. *(Репозиторий в настоящий момент является частным, но будет сделан открытым, как только мы привязать некоторые свободные концы)*
* Все шаблоны представляют собой плоские JSON-файлы в репозитории, что упрощает редактирование, участие и совместное использование рабочего процесса разработчика.
* Код для службы будет сделан доступным, чтобы вы могли разместить все, что вам нужно. 

## <a name="using-the-service"></a>Использование службы

### <a name="get-all-templates"></a>Получить все шаблоны 

Эта конечная точка возвращает список всех известных шаблонов.

> `HTTP GET https://templates.adaptivecards.io/list`

**Фрагмент ответа**

```json
{
  "graph.microsoft.com": {
    "templates": [
      {
        "file": "Files.json",
        "fullPath": "graph.microsoft.com/Files.json"
      },
      {
        "file": "Profile.json",
        "fullPath": "graph.microsoft.com/Profile.json"
      }
   ]
}
```

### <a name="find-a-template"></a>Поиск шаблона

Эта конечная точка пытается найти шаблон путем анализа структуры данных.

> `HTTP POST https://templates.adaptivecards.io/find`

#### <a name="example"></a>Пример

Предположим, что я просто нажал на конечную точку [Microsoft Graph](https://graph.microsoft.com) , чтобы получать организационные данные.

> `HTTP GET https://graph.microsoft.com/v1.0/me/`

![Снимок экрана проводника Graph](content/2019-08-01-12-08-13.png)

Этот API вернул **данные JSON**, но как **отображать их** пользователям с помощью адаптивных карт? 

Сначала я хочу узнать, существует ли шаблон для данных этого типа, поэтому я создаю HTTP-запрос к `/find` конечной точке с данными `POST body`в.

```
HTTP POST https://templates.adaptivecards.io/find

{
    "@odata.context": "https://graph.microsoft.com/v1.0/$metadata#users/$entity",
    "businessPhones": [
        "+1 412 555 0109"
    ],
    "displayName": "Megan Bowen",
    "givenName": "Megan",
    "jobTitle": "Auditor",
    "mail": "MeganB@M365x214355.onmicrosoft.com",
    "mobilePhone": null,
    "officeLocation": "12/1110",
    "preferredLanguage": "en-US",
    "surname": "Bowen",
    "userPrincipalName": "MeganB@M365x214355.onmicrosoft.com",
    "id": "48d31887-5fad-4d73-a9f5-3c356e68a038"
}
```

**Ответ**

```json
[
  {
    "templateUrl": "graph.microsoft.com/Profile.json",
    "confidence": 1
  }
]
```

Служба возвращает список всех совпадающих шаблонов, а `confidence` также указывает, насколько близко это соответствие. Теперь можно использовать этот URL-адрес шаблона для **получения** шаблона или **заполнения** его на стороне сервера.

### <a name="get-a-template"></a>Получение шаблона

Шаблон, полученный из этой конечной точки, можно заполнить данными во время выполнения [с помощью пакетов SDK для темплатнг](sdk.md).

> `HTTP GET https://templates.adaptivecards.io/[TEMPLATE-PATH]`

Можно также включить в шаблон "образец данных", что делает редактирование в конструкторе более удобным:

> `HTTP GET https://templates.adaptivecards.io/[TEMPLATE-PATH]?sampleData=true`

#### <a name="example"></a>Пример

Попробуем получить шаблон Microsoft Graphного профиля, возвращенный `/find` выше.

`HTTP GET https://templates.adaptivecards.io/graph.microsoft.com/Profile.json`

**Фрагмент ответа**

```json
{
  "type": "AdaptiveCard",
  "version": "1.0",
  "body": [
    {
      "type": "TextBlock",
      "size": "Medium",
      "weight": "Bolder",
      "text": "{name}"
    },
    {
        // ...snip
    }
  ]
}
```

Теперь используйте этот шаблон с пакетами [SDK для шаблонов](sdk.md) , чтобы создать готовую к просмотру адаптивную карту.

### <a name="populate-a-template-server-side"></a>Заполнение шаблона на стороне сервера

В некоторых случаях не имеет смысла заполнять шаблон на клиенте.  В этих случаях служба может вернуть полностью заполненную адаптивную карту, готовую к передаче любому адаптивному модулю подготовки карт.

> `HTTP POST https://templates.adaptivecards.io/[TEMPLATE-PATH]`

#### <a name="example"></a>Пример

Запустим шаблон Microsoft Graphного профиля, который был возвращен `/find` с помощью приведенных выше данных.

```
HTTP POST https://templates.adaptivecards.io/graph.microsoft.com/Profile.json

{
    "@odata.context": "https://graph.microsoft.com/v1.0/$metadata#users/$entity",
    "businessPhones": [
        "+1 412 555 0109"
    ],
    "displayName": "Megan Bowen",
    "givenName": "Megan",
    "jobTitle": "Auditor",
    "mail": "MeganB@M365x214355.onmicrosoft.com",
    "mobilePhone": null,
    "officeLocation": "12/1110",
    "preferredLanguage": "en-US",
    "surname": "Bowen",
    "userPrincipalName": "MeganB@M365x214355.onmicrosoft.com",
    "id": "48d31887-5fad-4d73-a9f5-3c356e68a038"
}
```

**Фрагмент ответа**

```json
{
  "type": "AdaptiveCard",
  "version": "1.0",
  "body": [
    {
      "type": "TextBlock",
      "size": "Medium",
      "weight": "Bolder",
      "text": "Megan Bowen"
    },
    {
        // ...snip
    }
  ]
}
```

Обратите внимание, что ответ `TextBlock` заменяет текст первого с помощью `"Megan Bowen"` вместо `"{name}"`, как в `GET` запросе. Теперь эту Адаптивекард можно передать в любой адаптивный модуль подготовки карт, не прополняя клиентские шаблоны.

## <a name="contributing-templates"></a>Участвующие шаблоны

Служба шаблонов поддерживается репозиторием GitHub (в настоящее время является **частным**), но мы откроем исходный код после того, как мы присвоим несколько свободных окончаний.

Мы надеемся, что, используя GitHub в качестве резервного хранилища для шаблонов, мы можем «более демократичным» процесс создания, улучшения и совместного использования шаблонов. Любой пользователь может отправить запрос на вытягивание, включающий совершенно новый шаблон, или внести улучшения в существующие... Все это в понятном для разработчика интерфейсе GitHub.

## <a name="self-hosting-the-service"></a>Размещение службы в собственном размещении

Не все типы данных подходят для службы шаблона "Central" адаптивных карт, размещенной в `https://templates.adaptivecards.io`. 

Мы хотим убедиться, что любой пользователь может разместить службу шаблонов в вашей организации, поэтому исходный код станет доступен, и мы сделаем его очень простым для развертывания в Azure или в своей серверной части.

Подробнее об этом позже.